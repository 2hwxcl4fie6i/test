(()=>{"use strict";var t={56:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},72:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var i={},a=[],c=0;c<t.length;c++){var l=t[c],s=r.base?l[0]+r.base:l[0],u=i[s]||0,d="".concat(s," ").concat(u);i[s]=u+1;var p=n(d),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==p)e[p].references++,e[p].updater(f);else{var g=o(f,r);r.byIndex=c,e.splice(c,0,{identifier:d,updater:g,references:1})}a.push(d)}return a}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var i=r(t=t||[],o=o||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var c=n(i[a]);e[c].references--}for(var l=r(t,o),s=0;s<i.length;s++){var u=n(i[s]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}i=l}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},249:(t,e,n)=>{n.d(e,{A:()=>s});var r=n(601),o=n.n(r),i=n(314),a=n.n(i),c=n(759),l=a()(o());l.i(c.A),l.push([t.id,"body {\n    margin: 0;\n    padding: 0;\n    font-family: Arial, sans-serif;\n}\n\n:root {\n    --background-dark: #1e1e1e;\n    --panel-bg: #2d2d2d;\n    --text-color: #ffffff;\n    --grid-color: #3a3a3a;\n    --grid-text: #888;\n    --button-bg: #4CAF50;\n    --button-hover: #45a049;\n}\n\n* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n}\n\nbody {\n    line-height: 1.6;\n    color: var(--text-color);\n    background-color: var(--background-dark);\n    min-height: 100vh;\n}\n\n.app-container {\n    padding: 20px;\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n    height: 100vh;\n}\n\n.control-panel {\n    background-color: var(--panel-bg);\n    padding: 15px;\n    border-radius: 4px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.left-buttons {\n    display: flex;\n    gap: 10px;\n}\n\n.right-buttons {\n    display: flex;\n    gap: 10px;\n}\n\n.control-panel button {\n    padding: 8px 16px;\n    border: none;\n    border-radius: 4px;\n    background-color: var(--button-bg);\n    color: white;\n    cursor: pointer;\n    font-size: 14px;\n    transition: background-color 0.3s;\n}\n\n.control-panel button:hover {\n    background-color: var(--button-hover);\n}\n\n.buffer-zone {\n    background-color: var(--panel-bg);\n    min-height: 150px;\n    border-radius: 4px;\n    padding: 15px;\n}\n\n.buffer-zone draggable-polygon {\n    cursor: grab;\n    transition: transform 0.2s, opacity 0.2s;\n}\n\n.buffer-zone draggable-polygon:hover {\n    transform: scale(1.1);\n    z-index: 1;\n}\n\n.buffer-zone draggable-polygon.dragging {\n    opacity: 0.5;\n}\n\n.buffer-zone draggable-polygon.removing {\n    transform: scale(0);\n    opacity: 0;\n}\n\nwork-zone {\n    flex-grow: 1;\n    background-color: var(--panel-bg);\n    border-radius: 4px;\n    --grid-color: #3a3a3a;\n    --grid-text: #888;\n}\n\n.grid-container {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n}\n\n.grid {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    background-image: \n        linear-gradient(var(--grid-color) 1px, transparent 1px),\n        linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);\n    background-size: 20px 20px;\n}\n\n.grid-markers {\n    position: absolute;\n    color: var(--grid-text);\n    font-size: 12px;\n}\n\n.vertical-markers {\n    left: 5px;\n    top: 0;\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n}\n\n.horizontal-markers {\n    bottom: 5px;\n    left: 0;\n    width: 100%;\n    display: flex;\n    justify-content: space-between;\n} ",""]);const s=l},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var c=0;c<this.length;c++){var l=this[c][0];null!=l&&(a[l]=!0)}for(var s=0;s<t.length;s++){var u=[].concat(t[s]);r&&a[u[0]]||(void 0!==i&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=i),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),o&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=o):u[4]="".concat(o)),e.push(u))}},e}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},601:t=>{t.exports=function(t){return t[1]}},659:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},759:(t,e,n)=>{n.d(e,{A:()=>c});var r=n(601),o=n.n(r),i=n(314),a=n.n(i)()(o());a.push([t.id,":root {\n    --color-background: #e0e0e0;\n    --color-text: #000000;\n    --color-border: #ccc;\n    \n    --color-grid: #3a3a3a;\n    \n    --color-button: #c0c0c0;\n    --color-button-hover: #b0b0b0;\n} ",""]);const c=a},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0;var r=n(72),o=n.n(r),i=n(825),a=n.n(i),c=n(659),l=n.n(c),s=n(56),u=n.n(s),d=n(540),p=n.n(d),f=n(113),g=n.n(f),y=n(249),v={};function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function m(t){var e=function(t){if("object"!=b(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==b(e)?e:e+""}function x(t){var e="function"==typeof Map?new Map:void 0;return x=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(w())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&k(o,n.prototype),o}(t,arguments,S(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),k(n,t)},x(t)}function w(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(w=function(){return!!t})()}function k(t,e){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},k(t,e)}function S(t){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},S(t)}v.styleTagTransform=g(),v.setAttributes=u(),v.insert=l().bind(null,"head"),v.domAPI=a(),v.insertStyleElement=p(),o()(y.A,v),y.A&&y.A.locals&&y.A.locals;var E=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,n){return e=S(e),function(t,e){if(e&&("object"==b(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,w()?Reflect.construct(e,n||[],S(t).constructor):e.apply(t,n))}(this,e)).attachShadow({mode:"open"}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&k(t,e)}(e,t),n=e,o=[{key:"observedAttributes",get:function(){return["label"]}}],(r=[{key:"connectedCallback",value:function(){this.render()}},{key:"attributeChangedCallback",value:function(t,e,n){e!==n&&this.render()}},{key:"render",value:function(){var t=this,e=this.getAttribute("label")||"Button";this.shadowRoot.innerHTML='\n            <style>\n                .button {\n                    padding: 8px 16px;\n                    border: none;\n                    border-radius: 4px;\n                    background-color: var(--color-button);\n                    color: var(--color-text);\n                    cursor: pointer;\n                    font-size: 14px;\n                    font-weight: 700;\n                    transition: background-color 0.3s;\n                }\n\n                .button:hover {\n                    background-color: var(--color-button-hover);\n                }\n            </style>\n            <button class="button">'.concat(e,"</button>\n        "),this.shadowRoot.querySelector("button").addEventListener("click",(function(){t.dispatchEvent(new CustomEvent("button-click",{bubbles:!0,composed:!0}))}))}}])&&h(n.prototype,r),o&&h(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o}(x(HTMLElement));function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function O(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,L(r.key),r)}}function L(t){var e=function(t){if("object"!=M(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==M(e)?e:e+""}function j(t){var e="function"==typeof Map?new Map:void 0;return j=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(z())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&T(o,n.prototype),o}(t,arguments,P(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),T(n,t)},j(t)}function z(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(z=function(){return!!t})()}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function P(t){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},P(t)}customElements.define("custom-button",E);var A=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,n){return e=P(e),function(t,e){if(e&&("object"==M(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,z()?Reflect.construct(e,n||[],P(t).constructor):e.apply(t,n))}(this,e)).attachShadow({mode:"open"}),t._size=40,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(e,t),n=e,r=[{key:"connectedCallback",value:function(){this.render(),this.setupDragAndDrop()}},{key:"render",value:function(){var t=this.getAttribute("vertices")||Math.floor(6*Math.random())+3,e=this.getAttribute("points")||function(t,e){for(var n=[],r=e/2,o=e/2,i=e/2-5,a=0;a<t;a++){var c=2*a*Math.PI/t,l=i*(.6+.8*Math.random()),s=r+l*Math.cos(c),u=o+l*Math.sin(c);n.push("".concat(s,",").concat(u))}return n.join(" ")}(t,this._size),n="0 0 ".concat(this._size," ").concat(this._size);this.shadowRoot.innerHTML="\n            <style>\n                :host {\n                    display: inline-block;\n                    cursor: move;\n                    transition: transform 0.2s;\n                    width: ".concat(this._size,"px;\n                    height: ").concat(this._size,'px;\n                }\n\n                :host(:hover) {\n                    transform: scale(1.1);\n                    z-index: 1;\n                }\n\n                svg {\n                    width: 100%;\n                    height: 100%;\n                    display: block;\n                }\n\n                polygon {\n                    fill: rgba(220, 53, 69, 0.6);\n                    stroke: rgba(220, 53, 69, 0.8);\n                    stroke-width: 1;\n                    vector-effect: non-scaling-stroke;\n                }\n            </style>\n            <svg viewBox="').concat(n,'" preserveAspectRatio="xMidYMid meet">\n                <polygon points="').concat(e,'"></polygon>\n            </svg>\n        ')}},{key:"setupDragAndDrop",value:function(){var t=this;this.draggable=!0,this.addEventListener("dragstart",(function(e){e.dataTransfer.setData("text/plain",""),e.dataTransfer.effectAllowed="move",t.classList.add("dragging");var n=t.shadowRoot.querySelector("polygon"),r=t.shadowRoot.querySelector("svg"),o={points:n.getAttribute("points"),vertices:t.getAttribute("vertices"),size:t._size,viewBox:r.getAttribute("viewBox")};e.dataTransfer.setData("application/json",JSON.stringify(o))})),this.addEventListener("dragend",(function(){t.classList.remove("dragging")}))}}],r&&O(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(j(HTMLElement));function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function _(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,q(r.key),r)}}function q(t){var e=function(t){if("object"!=R(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==R(e)?e:e+""}function D(t){var e="function"==typeof Map?new Map:void 0;return D=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(C())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&B(o,n.prototype),o}(t,arguments,H(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),B(n,t)},D(t)}function C(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(C=function(){return!!t})()}function B(t,e){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},B(t,e)}function H(t){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},H(t)}customElements.define("draggable-polygon",A);var I=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,n){return e=H(e),function(t,e){if(e&&("object"==R(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,C()?Reflect.construct(e,n||[],H(t).constructor):e.apply(t,n))}(this,e)).attachShadow({mode:"open"}),t.scale=1,t.isDragging=!1,t.startX=0,t.startY=0,t.scrollLeft=0,t.scrollTop=0,t.draggedPolygon=null,t.viewportStart={x:0,y:0},t.maxValues={x:100,y:50},t.minValues={x:0,y:0},t.currentValues={x:100,y:50},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&B(t,e)}(e,t),n=e,r=[{key:"connectedCallback",value:function(){this.render(),this.setupEventListeners(),this.setupDropZone(),this.updateGridMarkers(),this.loadPolygons()}},{key:"render",value:function(){this.shadowRoot.innerHTML='\n            <style>\n                :host {\n                    display: block;\n                    width: 100%;\n                    height: 100%;\n                    position: relative;\n                    overflow: hidden;\n                }\n\n                .workspace {\n                    position: relative;\n                    width: 100%;\n                    height: 100%;\n                    padding-left: 30px;\n                    padding-bottom: 25px;\n                    box-sizing: border-box;\n                }\n\n                .grid-container {\n                    position: relative;\n                    width: 100%;\n                    height: 100%;\n                    overflow: auto;\n                    cursor: grab;\n                    scrollbar-width: none;\n                    -ms-overflow-style: none;\n                }\n\n                .grid-container::-webkit-scrollbar {\n                    display: none;\n                }\n\n                .grid-container.dragging {\n                    cursor: grabbing;\n                }\n\n                .grid {\n                    position: relative;\n                    width: 200%;\n                    height: 200%;\n                    background-image: \n                        linear-gradient(var(--color-grid) 1px, transparent 1px),\n                        linear-gradient(90deg, var(--color-grid) 1px, transparent 1px);\n                    background-size: \n                        calc(20px * var(--scale, 1)) calc(20px * var(--scale, 1));\n                    transform-origin: 0 0;\n                }\n\n                .polygons-container {\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n                    width: 200%;\n                    height: 200%;\n                    transform-origin: 0 0;\n                    pointer-events: none;\n                    z-index: 1;\n                }\n\n                .polygons-container draggable-polygon {\n                    pointer-events: all;\n                    position: absolute;\n                    transform-origin: center center;\n                    z-index: 2;\n                    cursor: grab;\n                }\n\n                .polygons-container draggable-polygon.dragging {\n                    cursor: grabbing;\n                }\n\n                .markers {\n                    position: absolute;\n                    background-color: var(--color-background);\n                    color: var(--color-text);\n                    font-size: 12px;\n                    font-weight: 700;\n                    pointer-events: none;\n                    display: flex;\n                    z-index: 1;\n                }\n\n                .vertical-markers {\n                    left: 0;\n                    top: 0;\n                    width: 30px;\n                    height: calc(100% - 25px);\n                    flex-direction: column;\n                    justify-content: flex-start;\n                    border-right: 1px solid var(--color-border);\n                    box-sizing: border-box;\n                }\n\n                .horizontal-markers {\n                    left: 30px;\n                    bottom: 0;\n                    width: calc(100% - 30px);\n                    height: 25px;\n                    flex-direction: row;\n                    justify-content: flex-start;\n                    border-top: 1px solid var(--color-border);\n                    box-sizing: border-box;\n                }\n\n                .marker {\n                    position: absolute;\n                    color: var(--color-text);\n                    font-size: 12px;\n                    font-weight: 700;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    box-sizing: border-box;\n                }\n\n                .vertical-marker {\n                    width: 100%;\n                    height: 20px;\n                    padding: 0 2px;\n                }\n\n                .horizontal-marker {\n                    height: 100%;\n                    width: 30px;\n                    padding: 2px 0;\n                }\n\n                .corner-marker {\n                    position: absolute;\n                    left: 0;\n                    bottom: 0;\n                    width: 30px;\n                    height: 25px;\n                    background-color: var(--color-background);\n                    border-right: 1px solid var(--color-border);\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    z-index: 2;\n                    color: var(--color-text);\n                    font-size: 12px;\n                    font-weight: 700;\n                    box-sizing: border-box;\n                }\n            </style>\n            <div class="workspace">\n                <div class="markers vertical-markers"></div>\n                <div class="markers horizontal-markers"></div>\n                <div class="corner-marker">0</div>\n                <div class="grid-container">\n                    <div class="grid"></div>\n                    <div class="polygons-container"></div>\n                </div>\n            </div>\n        '}},{key:"setupEventListeners",value:function(){var t=this,e=this.shadowRoot.querySelector(".grid-container"),n=this.shadowRoot.querySelector(".grid"),r=this.shadowRoot.querySelector(".polygons-container");e.addEventListener("wheel",(function(o){o.preventDefault();var i=o.deltaY,a=e.getBoundingClientRect(),c=o.clientX-a.left,l=o.clientY-a.top,s=t.scale;t.scale=Math.min(Math.max(.5,t.scale+(i>0?-.1:.1)),3),n.style.setProperty("--scale",t.scale),r&&(r.style.transform="scale(".concat(t.scale,")"));var u=t.scale/s;e.scrollLeft=c*(u-1)+e.scrollLeft*u,e.scrollTop=l*(u-1)+e.scrollTop*u,requestAnimationFrame((function(){t.updateViewport(),t.updateGridMarkers()}))})),e.addEventListener("mousedown",(function(o){o.target!==e&&o.target!==n&&o.target!==r||(t.isDragging=!0,e.classList.add("dragging"),t.startX=o.clientX,t.startY=o.clientY,t.initialScrollLeft=e.scrollLeft,t.initialScrollTop=e.scrollTop)})),e.addEventListener("mousemove",(function(n){if(t.isDragging){n.preventDefault();var r=n.clientX,o=n.clientY,i=t.startX-r,a=t.startY-o;e.scrollLeft=Math.max(0,t.initialScrollLeft+i),e.scrollTop=Math.max(0,t.initialScrollTop+a),t.updateViewport(),t.updateGridMarkers()}})),e.addEventListener("scroll",(function(){requestAnimationFrame((function(){t.updateViewport(),t.updateGridMarkers()}))})),e.addEventListener("mouseup",(function(){return t.stopDragging()})),e.addEventListener("mouseleave",(function(){return t.stopDragging()})),document.addEventListener("button-click",(function(e){var n=e.target.getAttribute("label");"Сохранить"===n?t.savePolygons():"Сбросить"===n&&t.resetPolygons()}))}},{key:"stopDragging",value:function(){this.isDragging&&(this.isDragging=!1,this.shadowRoot.querySelector(".grid-container").classList.remove("dragging"))}},{key:"setupDropZone",value:function(){var t=this,e=this.shadowRoot.querySelector(".grid-container"),n=this.shadowRoot.querySelector(".polygons-container");e.addEventListener("dragover",(function(t){t.preventDefault(),t.dataTransfer.dropEffect="move"})),e.addEventListener("drop",(function(r){r.preventDefault();var o=e.getBoundingClientRect(),i=(r.clientX-o.left+e.scrollLeft)/t.scale,a=(r.clientY-o.top+e.scrollTop)/t.scale;if(t.draggedPolygon&&n.contains(t.draggedPolygon))t.draggedPolygon.style.left="".concat(i,"px"),t.draggedPolygon.style.top="".concat(a,"px"),t.draggedPolygon.classList.remove("dragging");else try{var c,l=JSON.parse(r.dataTransfer.getData("application/json")),s=document.createElement("draggable-polygon");s.setAttribute("vertices",l.vertices),s.setAttribute("points",l.points),s.setAttribute("size",l.size),l.viewBox&&(null===(c=s.shadowRoot)||void 0===c||null===(c=c.querySelector("svg"))||void 0===c||c.setAttribute("viewBox",l.viewBox)),s.style.position="absolute",s.style.left="".concat(i,"px"),s.style.top="".concat(a,"px"),s.setAttribute("data-in-workzone","true"),n.appendChild(s);var u=document.querySelector("draggable-polygon.dragging");u&&u.remove()}catch(t){console.error("Error creating new polygon:",t)}t.draggedPolygon=null})),n.addEventListener("dragstart",(function(e){var r=e.target.closest("draggable-polygon");if(r&&n.contains(r)){var o;t.draggedPolygon=r,r.classList.add("dragging");var i=null===(o=r.shadowRoot)||void 0===o?void 0:o.querySelector("svg"),a={points:r.getAttribute("points"),vertices:r.getAttribute("vertices"),size:r.getAttribute("size"),viewBox:null==i?void 0:i.getAttribute("viewBox"),fromWorkZone:!0};e.dataTransfer.setData("application/json",JSON.stringify(a))}})),n.addEventListener("dragend",(function(e){t.draggedPolygon&&(t.draggedPolygon.classList.remove("dragging"),t.draggedPolygon=null)}))}},{key:"updateViewport",value:function(){var t=this.shadowRoot.querySelector(".grid-container"),e=t.scrollLeft,n=t.scrollTop,r=t.clientWidth,o=t.clientHeight,i=20*this.scale,a=Math.ceil(r/i),c=Math.ceil(o/i),l=Math.floor(e/i),s=Math.floor(n/i);this.viewportStart={x:Math.max(0,l),y:Math.max(0,s)},this.currentValues={x:Math.max(this.maxValues.x,l+a),y:Math.max(this.maxValues.y,s+c)};var u=this.shadowRoot.querySelector(".grid"),d=this.shadowRoot.querySelector(".polygons-container"),p=Math.max(this.currentValues.x*i,2*r),f=Math.max(this.currentValues.y*i,2*o);u.style.width="".concat(p,"px"),u.style.height="".concat(f,"px"),d&&(d.style.width="".concat(p,"px"),d.style.height="".concat(f,"px"))}},{key:"updateGridMarkers",value:function(){var t=this.shadowRoot.querySelector(".grid-container"),e=this.shadowRoot.querySelector(".vertical-markers"),n=this.shadowRoot.querySelector(".horizontal-markers");e.innerHTML="",n.innerHTML="";for(var r=20*this.scale,o=Math.max(5,Math.floor(10/this.scale)),i=Math.floor(t.scrollTop/r),a=Math.ceil((t.scrollTop+t.clientHeight)/r),c=Math.floor(i/o)*o;c<=Math.ceil(a/o)*o;c+=o)if(c>0){var l=document.createElement("div");l.className="marker vertical-marker",l.textContent=c.toString();var s=(c*r-t.scrollTop)/t.clientHeight*100;s>=0&&s<=100&&(l.style.top="".concat(s,"%"),e.appendChild(l))}for(var u=Math.floor(t.scrollLeft/r),d=Math.ceil((t.scrollLeft+t.clientWidth)/r),p=Math.floor(u/o)*o;p<=Math.ceil(d/o)*o;p+=o)if(p>0){var f=document.createElement("div");f.className="marker horizontal-marker",f.textContent=p.toString();var g=(p*r-t.scrollLeft)/t.clientWidth*100;g>=0&&g<=100&&(f.style.left="".concat(g,"%"),n.appendChild(f))}}},{key:"savePolygons",value:function(){var t=this,e=this.shadowRoot.querySelector(".polygons-container").querySelectorAll("draggable-polygon"),n=Array.from(e).map((function(e){var n,r=null===(n=e.shadowRoot)||void 0===n?void 0:n.querySelector("polygon");return{vertices:e.getAttribute("vertices"),points:(null==r?void 0:r.getAttribute("points"))||e.getAttribute("points"),size:e.getAttribute("size"),position:{left:e.style.left,top:e.style.top},transform:e.style.transform,scale:t.scale}}));localStorage.setItem("workzone-polygons",JSON.stringify(n))}},{key:"loadPolygons",value:function(){var t=this,e=localStorage.getItem("workzone-polygons");if(e)try{var n=this.shadowRoot.querySelector(".polygons-container");n.innerHTML="",JSON.parse(e).forEach((function(e){var r=document.createElement("draggable-polygon");if(r.setAttribute("vertices",e.vertices),r.setAttribute("points",e.points),r.setAttribute("size",e.size),r.style.position="absolute",r.style.left=e.position.left,r.style.top=e.position.top,e.scale&&t.scale!==e.scale){var o=t.scale/e.scale;r.style.transform="scale(".concat(o,")")}else r.style.transform=e.transform||"scale(1)";n.appendChild(r)}))}catch(t){console.error("Error loading polygons:",t)}}},{key:"resetPolygons",value:function(){this.shadowRoot.querySelector(".polygons-container").innerHTML="",localStorage.removeItem("workzone-polygons")}}],r&&_(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(D(HTMLElement));function N(t,e){return Math.floor(Math.random()*(e-t+1))+t}function V(){var t=document.getElementById("bufferZone");t.innerHTML="";var e=N(5,20),n=document.createElement("div");n.style.display="flex",n.style.flexWrap="wrap",n.style.gap="10px",n.style.padding="10px";for(var r=0;r<e;r++){var o=document.createElement("draggable-polygon");o.setAttribute("vertices",N(3,8)),n.appendChild(o)}t.appendChild(n)}customElements.define("work-zone",I),document.addEventListener("DOMContentLoaded",(function(){!function(){document.querySelector('custom-button[label="Создать"]').addEventListener("button-click",V),document.querySelector('custom-button[label="Сохранить"]').addEventListener("button-click",(function(){})),document.querySelector('custom-button[label="Сбросить"]').addEventListener("button-click",(function(){document.getElementById("bufferZone").innerHTML=""}));var t=document.getElementById("bufferZone");document.querySelector("work-zone").addEventListener("dragstart",(function(t){var e=t.target.closest("draggable-polygon");e&&(e.dataset.source="workzone")})),t.addEventListener("dragstart",(function(t){var e=t.target.closest("draggable-polygon");e&&(e.dataset.source="buffer")})),t.addEventListener("dragover",(function(t){t.preventDefault();try{var e=t.dataTransfer.getData("application/json");if(e&&JSON.parse(e).fromWorkZone)return void(t.dataTransfer.dropEffect="none")}catch(t){console.error("Error checking drag source:",t)}t.dataTransfer.dropEffect="move"})),t.addEventListener("drop",(function(e){e.preventDefault();try{var n=JSON.parse(e.dataTransfer.getData("application/json"));if(n.fromWorkZone)return;var r=document.createElement("draggable-polygon");r.setAttribute("vertices",n.vertices),r.setAttribute("points",n.points),r.setAttribute("size",n.size),t.appendChild(r)}catch(t){console.error("Error handling drop:",t)}})),document.querySelector("work-zone").addEventListener("drop",(function(t){var e=document.querySelector("draggable-polygon.dragging");e&&"buffer"===e.dataset.source&&(e.classList.add("removing"),e.addEventListener("transitionend",(function(){e.remove()}),{once:!0}))}))}()}))})();